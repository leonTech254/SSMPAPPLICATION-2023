<conversationScreen>:
    MDCard:
        orientation:"vertical"
        md_bg_color:1,0,1,1
        MDTopAppBar:
            md_bg_color:mynav.md_bg_color
            size_hint_y:None
            height:dp(20)
            left_action_items: [["arrow-left-bold", lambda x:app.exit_chat("mainScreen")]]
        MDCard:
            id:mynav
            orientation:"horizontal"
            elevation:1
            size_hint:None,None
            size:root.width,120
            md_bg_color:app.theme_cls.primary_color
            elevation:10
            MDBoxLayout:
                spacing:dp(10)
                MDCard:
                    size_hint:None,None
                    size:90,90
                    radius:[45,]
                    elevation:0
                    pos_hint:{"center_y":.5}
                    FitImage:
                        radius:[45,]
                        source:"root.profileIcon"
                MDBoxLayout:
                    adaptive_height:True
                    adaptive_width:True
                    pos_hint:{"center_y":.6}
                    MDBoxLayout:
                        orientation:"vertical"
                        adaptive_height:True
                        MDLabel:
                            text:"root.chatName"
                            halign:"left"
                            adaptive_height:True
                            bold:True
                        MDLabel:
                            text:"online"
                            halighn:"center"
                            adaptive_height:True
            MDBoxLayout:
                adaptive_size:True
                pos_hint:{"center_x":1,"center_y":.5}
                MDIconButton:
                    icon:"video"
                MDIconButton:
                    icon:"phone"
                MDIconButton:
                    icon:"key"
                    on_press:app.decrypt_allMessages()
                MDIconButton:
                    icon:"help"

        MDTopAppBar:
            md_bg_color:mynav.md_bg_color
            size_hint_y:None
            height:dp(20)
            right_action_items: [["checkbox-blank-circle", lambda x:x]]
            text_color: rgba('#F0F0F0')
            specific_text_color: 0,1,0,1
            id:mytoolbar
            adaptive_width:True
            MDLabel:
                text:"integrity"
                size_hint_x:None
                halign:"right"
                bold:True


        ScrollView:
            MDBoxLayout:
                orientation:"vertical"
                adaptive_height:True
                MDList:
                    spacing:5
                    id:chatsmsg
        MDBoxLayout:
            adaptive_height:True
            MDBoxLayout:
                MDTextField:
                    id:msginput
                    hint_text:"type message"
                    pos_hint:{'center_y':.5}
                    multiline:True
                    icon_left:'key-variant'
            MDBoxLayout:
                adaptive_width:True
                MDRoundFlatIconButton:
                    text:"SEND"
                    icon:"send"
                    pos_hint:{'center_y':.5}
                    on_press:app.send_msg(msginput.text)

<Avatar@RelativeLayout>:
    size:(dp(45),dp(45))
    size_hint:None,None
    source:"root.source"
    MDCard:
        size:root.size
        size_hint:(None,None)
        radius:[30,]
        md_bg_color:app.theme_cls.primary_color
        elevation:0
        position_hint:{'center_x':.5,'center_y':.5}
    FitImage:
        size:root.size[0]-dp(3),root.size[1]-dp(3)
        size_hint:None,None
        source:root.source
        radius:[30,]
        pos_hint:{'center_x':.5,'center_y':.5}

<Item>:
    on_release:app.athenticationMethod(self.text)
    IconLeftWidget:
        id:try
        icon:root.source